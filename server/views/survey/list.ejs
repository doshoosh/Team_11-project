
<%- include ../partials/header.ejs %>

<main class="container">
  <div class="jumbotron">
    <h1 class="display-4"><%= title %></h1>
    <p class="lead">Welcome, <strong> <%= displayName %>.</strong> Here is the list of the available surveys!</p>
    <div class="manage-survey text-right">
      <a href="/survey-list/add" class="btn btn-primary" role="button"> <i class="fas fa-plus-circle"></i> Add a Survey</a>
    </div>
    <br class="my-3">
    <div class="survey-lists">
      <table class="table table-hover table-responsive-md">
        <thead class="thead-light">
          <tr class="d-flex">
            <th class="col-3">Survey Name</th>
            <th class="col-3">Survey Type</th>
            <th class="col-1">Release date</th>
            <th class="col-1">Expiry Date</th>
            <th class="col-3"></th>
          </tr>
        </thead>
        <tbody>
          <% for (let count = 0; count < surveyList.length; count++) { %>
            <tr class="d-flex survey-list-item">
              <td class="col-3"><%= surveyList[count].name %></td>
              <td class="col-3"><%= surveyList[count].type %></td>
              <td class="col-1"><%= surveyList[count].releaseDate %></td>
              <td class="col-1"><%= surveyList[count].expiryDate %></td>
              <td class="text-right col-3">
                <a href="/survey-list/edit/<%= surveyList[count]._id %>" class="btn btn-primary btn-sm" role="button"><i class="fa fa-pencil-alt"></i> Edit</a>

                <a data-toggle="modal" data-id="<%= surveyList[count]._id %>" data-target="#confModel" href="#" class="btn btn-danger btn-sm" role="button"><i class="fa fa-trash-alt"></i> Delete</a>
              </td>
            </tr>             
          <% } %>          
        </tbody>
      </table>
    </div>
  </div>
</main>
</main>

<!-- model for deletion confirmation  -->
<div class="modal fade" id="confModel" tabindex="-1" role="dialog" aria-labelledby="confModelLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confModelLabel">Delete Survey Information?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Do you really want to delete this survey? This action is irreversible!
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fa fa-undo"></i> Cancel</button>
        <a role="button" class="btn btn-danger delete_confirm" href=""> <i class="fa fa-trash-alt"></i> Delete forever</a>
      </div>
    </div>
  </div>
</div>

<%- include ../partials/footer.ejs %>